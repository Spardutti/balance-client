(this["webpackJsonpclient-"]=this["webpackJsonpclient-"]||[]).push([[0],{173:function(e,t){},175:function(e,t){},188:function(e,t){},190:function(e,t){},218:function(e,t){},220:function(e,t){},221:function(e,t){},226:function(e,t){},228:function(e,t){},247:function(e,t){},259:function(e,t){},262:function(e,t){},309:function(e,t,n){},310:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(30),r=n.n(a),s=n(11),i=n(83),o=n(14),l=n(12),j=n.n(l),d=n(17),u=n(2),h=function(e){return Object(u.jsxs)("div",{children:[e.userInfo?Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"top-bar",children:Object(u.jsxs)("div",{className:"user d-flex justify-content-between ",children:[Object(u.jsxs)("h5",{className:"align-self-center",children:["Welcome ",e.userInfo.username.split(" ")[0]]}),Object(u.jsx)("a",{href:"https://infinite-woodland-48479.herokuapp.com/logout",className:"btn btn-dark text-light btn-sm",onClick:function(){localStorage.clear()},children:"Log out"})]})})}):Object(u.jsx)("div",{className:"top-bar"}),Object(u.jsx)("div",{className:"header",children:Object(u.jsxs)("div",{className:" d-flex flex-column justify-content-center h-75 align-items-center",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h1",{className:"display-5",children:"Balance"})}),Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:" mt-1 text-dark",children:"Balance your expenses, Balance your life"})})]})})]})},f=n(157),b=n.n(f),O=n(321),p=n(314),x=n(322),m=n(323),g=n(315),v=n(316),k=n(317),w=n(324),y=n(325),N=n(160),S=n(326),C=n(319),A=n(27),I=n.n(A),T=n(332),D=n(312),F=n(313),B=n(318),E=function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),a=n[0],r=n[1],i=function(){var t=Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://infinite-woodland-48479.herokuapp.com/folder/add",{method:"POST",headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},body:JSON.stringify({name:a})});case 2:e.toggle(),e.getFolders(),e.setFolderAdded(!0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(u.jsxs)(T.a,{isOpen:e.modal,children:[Object(u.jsx)(D.a,{toggle:e.toggle,children:"Create Folder"}),Object(u.jsx)(F.a,{children:Object(u.jsx)(p.a,{children:Object(u.jsxs)(g.a,{children:[Object(u.jsx)(v.a,{children:"Folder name"}),Object(u.jsx)(k.a,{onChange:function(e){r(e.target.value)},placeholder:"folder name",value:a})]})})}),Object(u.jsx)(B.a,{children:Object(u.jsx)(C.a,{onClick:i,className:"bg-primary",children:"Add"})})]})},P=n(331),L=n(320),z=function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(P.a,{trigger:"focus",placement:"bottom",isOpen:e.popoverOpen,target:"Popover1",toggle:e.popUpToggle,children:Object(u.jsx)(L.a,{children:e.msg})})})},Y=function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(),o=Object(s.a)(i,2),l=o[0],h=o[1],f=Object(c.useState)(""),b=Object(s.a)(f,2),A=b[0],T=b[1],D=Object(c.useState)([]),F=Object(s.a)(D,2),B=F[0],P=F[1],L=Object(c.useState)(!1),Y=Object(s.a)(L,2),M=Y[0],_=Y[1],U=Object(c.useState)(!1),V=Object(s.a)(U,2),J=V[0],H=V[1],G=function(){return H(!J)},W=function(){_(!M)},q=function(){var t=Object(d.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),A&&a&&l||G(),!(a&&l&&A)){t.next=14;break}return e.setLoading(!0),t.next=6,fetch("https://infinite-woodland-48479.herokuapp.com/add/"+e.userInfo._id,{method:"POST",headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},body:JSON.stringify({name:a,price:l,folder:A})});case 6:c=t.sent,e.setActiveYear((new Date).getFullYear()),e.setActiveMonth((new Date).toLocaleDateString("default",{month:"long"})),h(""),r(""),T(""),e.getCurrentDateItems(),c&&e.setLoading(!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(){var t=Object(d.a)(j.a.mark((function t(){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://infinite-woodland-48479.herokuapp.com/folders",{headers:{Authorization:"Bearer "+e.token}});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,P(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){K()}),[]),Object(u.jsxs)(O.a,{className:" pt-2",children:[Object(u.jsxs)(p.a,{autoComplete:"off",children:[Object(u.jsxs)(x.a,{children:[Object(u.jsx)(m.a,{sm:4,children:Object(u.jsxs)(g.a,{children:[Object(u.jsx)(v.a,{children:"Description"}),Object(u.jsx)(k.a,{autoComplete:"off",onChange:function(e){r(e.target.value)},type:"text",name:"name",placeholder:"what you bought/paid",value:a})]})}),Object(u.jsx)(m.a,{sm:4,children:Object(u.jsxs)(g.a,{children:[Object(u.jsx)(v.a,{children:"Amount Spent"}),Object(u.jsx)(k.a,{autoComplete:"off",onChange:function(e){h(e.target.value)},type:"number",name:"price",placeholder:"How much did you pay for",value:l})]})}),Object(u.jsx)(m.a,{sm:4,children:Object(u.jsxs)(g.a,{children:[Object(u.jsx)(v.a,{children:"Folder"}),Object(u.jsxs)(w.a,{children:[Object(u.jsx)(y.a,{addonType:"prepend",children:Object(u.jsx)(N.a,{onClick:W,className:"",children:Object(u.jsx)("div",{children:Object(u.jsx)("i",{className:"fas fa-folder-plus"})})})}),Object(u.jsxs)(k.a,{type:"select",name:"folder",value:A,onChange:function(e){T(e.target.value)},children:[Object(u.jsx)("option",{disabled:!0,value:"",children:B.length>0?"Select a folder":"Create folder"}),B.map((function(e){return Object(u.jsx)("option",{value:e._id,children:e.name},I()())}))]})]})]})})]}),Object(u.jsx)(m.a,{sm:12,className:"justify-content-center d-flex mt-2",children:e.loading?Object(u.jsx)(S.a,{}):Object(u.jsx)(C.a,{id:"Popover1",onClick:q,className:"bg-primary",children:"Add Item"})})]}),M?Object(u.jsx)(E,{toggle:W,modal:M,token:e.token,getFolders:K,setFolderAdded:e.setFolderAdded}):null,J?Object(u.jsx)(z,{popoverOpen:J,popUpToggle:G,msg:"Please fill all the field"}):null]})},M=n(327),_=n(328),U=n(329),V=function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(M.a,{tabs:!0,className:"justify-content-center d-flex",children:e.yearsToDisplay.map((function(t){return Object(u.jsx)(_.a,{children:Object(u.jsx)(U.a,{id:t,onClick:function(n){e.getCurrentYearMonths(t),e.getActiveYear(n)},className:e.activeYear===t?"active mt-2 mb-2":"text-dark mt-2 mb-2 tabs",children:t})},I()())}))})})},J=function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(M.a,{tabs:!0,className:"justify-content-center d-flex",children:e.monthsToDisplay.map((function(t){return Object(u.jsx)(_.a,{children:Object(u.jsx)(U.a,{id:t,onClick:e.getActiveMonth,className:e.activeMonth===t?"active":"text-dark tabs",children:t})},I()())}))})})},H=n(330),G=function(e){return Object(u.jsx)("div",{children:Object(u.jsxs)(T.a,{isOpen:e.modal,toggle:e.toggle,children:[Object(u.jsx)(D.a,{toggle:e.toggle,children:"Modal title"}),Object(u.jsx)(F.a,{children:Object(u.jsxs)(p.a,{children:[Object(u.jsx)(g.a,{children:Object(u.jsx)(k.a,{value:e.itemName,onChange:function(t){e.setItemName(t.target.value)}})}),Object(u.jsx)(g.a,{children:Object(u.jsx)(k.a,{value:e.itemPrice,onChange:function(t){e.setItemPrice(t.target.value)}})})]})}),Object(u.jsx)(B.a,{children:Object(u.jsx)(C.a,{color:"primary",onClick:function(){e.toggle(),e.editItem()},children:"Edit"})})]})})},W=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(""),o=Object(s.a)(i,2),l=o[0],h=o[1],f=Object(c.useState)(""),b=Object(s.a)(f,2),O=b[0],p=b[1],x=Object(c.useState)(""),m=Object(s.a)(x,2),g=m[0],v=m[1],k=function(){r(!a)};Object(c.useEffect)((function(){e.items.map((function(t){e.setPriceTotal((function(e){return e+t.price}))}))}),[e.items]);var w=function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://infinite-woodland-48479.herokuapp.com/item/delete/"+n,{method:"DELETE",headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"}});case 2:e.getCurrentDateItems();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://infinite-woodland-48479.herokuapp.com/item/edit/"+g,{method:"PUT",headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},body:JSON.stringify({name:l,price:O})});case 2:e.getCurrentDateItems(),h(""),p(""),v("");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(u.jsxs)("div",{children:[Object(u.jsxs)(H.a,{striped:!0,responsive:!0,bordered:!0,className:"text-center",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Description"}),Object(u.jsx)("th",{children:"Spent"}),Object(u.jsx)("th",{children:"Folder"})]})}),Object(u.jsx)("tbody",{children:e.items?e.items.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:e.price}),Object(u.jsx)("td",{children:e.folder.name}),Object(u.jsx)("td",{style:{width:"10px"},children:Object(u.jsx)("i",{className:"far fa-edit",onClick:function(){k(),function(e){p(e.price),h(e.name),v(e._id)}(e)}})}),Object(u.jsx)("td",{style:{width:"10px"},children:Object(u.jsx)("i",{className:"far fa-trash-alt",onClick:function(){w(e._id)}})})]},I()())})):Object(u.jsx)("p",{children:"no items"})}),Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Total"}),Object(u.jsxs)("th",{children:[e.priceTotal," "]})]})})]}),a?Object(u.jsx)(G,{toggle:k,modal:a,itemName:l,itemPrice:O,setItemName:h,setItemPrice:p,editItem:y}):null]})},q=function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)("All"),o=Object(s.a)(i,2),l=o[0],h=o[1],f=Object(c.useState)(),b=Object(s.a)(f,2),O=b[0],p=b[1],x=function(t){l!==t&&h(t),e.setPriceTotal(0)},m=function(){var t=Object(d.a)(j.a.mark((function t(){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://infinite-woodland-48479.herokuapp.com/folders",{headers:{Authorization:"Bearer "+e.token}});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,r(c),e.setFolderAdded(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(d.a)(j.a.mark((function t(n){var c,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,fetch("https://infinite-woodland-48479.herokuapp.com/folder/"+n+"/"+e.activeYear+"/"+e.activeMonth,{headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"}});case 3:return c=t.sent,t.next=6,c.json();case 6:a=t.sent,e.setItems(a),c&&e.setLoading(!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(d.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://infinite-woodland-48479.herokuapp.com/item/folder/"+O,{headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"}});case 2:return c=t.sent,t.next=5,c.json();case 5:0===t.sent.length?k():alert("Please delete all items before deleting the folder");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://infinite-woodland-48479.herokuapp.com/folder/delete/"+O,{method:"DELETE",headers:{Authorization:"Bearer "+e.token}});case 2:m();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){m()}),[e.folderAdded]),Object(u.jsx)("div",{className:"d-flex justify-content-center",children:Object(u.jsxs)(M.a,{tabs:!0,children:[Object(u.jsx)(_.a,{children:Object(u.jsx)(U.a,{onClick:function(){x("All"),e.getCurrentDateItems()},className:"All"===l?" active":"text-dark tabs",children:"All"})}),a.map((function(e){return Object(u.jsx)(_.a,{children:Object(u.jsxs)(U.a,{id:e._id,onClick:function(){x(e.name),g(e._id),p(e._id)},className:l===e.name?" active":"text-dark tabs",children:[e.name," ",l===e.name?Object(u.jsx)("i",{className:"far fa-trash-alt",onClick:v}):null]})},I()())}))]})})},K=function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([]),o=Object(s.a)(i,2),l=o[0],h=o[1],f=Object(c.useState)([]),b=Object(s.a)(f,2),O=b[0],p=b[1],x=Object(c.useState)((new Date).getFullYear()),m=Object(s.a)(x,2),g=m[0],v=m[1],k=Object(c.useState)((new Date).toLocaleDateString("en-US",{month:"long"})),w=Object(s.a)(k,2),y=w[0],N=w[1],C=Object(c.useState)(0),A=Object(s.a)(C,2),I=A[0],T=A[1],D=Object(c.useState)(!1),F=Object(s.a)(D,2),B=F[0],E=F[1],P=Object(c.useState)(!1),L=Object(s.a)(P,2),z=L[0],M=L[1],_=function(){var t=Object(d.a)(j.a.mark((function t(){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://infinite-woodland-48479.herokuapp.com/items/year",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,r(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=Object(d.a)(j.a.mark((function t(n){var c,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n||(n=(new Date).getFullYear()),t.next=3,fetch("https://infinite-woodland-48479.herokuapp.com/items/year/"+n,{headers:{Authorization:"Bearer "+e.token}});case 3:return c=t.sent,t.next=6,c.json();case 6:a=t.sent,h(a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=Object(d.a)(j.a.mark((function t(){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(!0),t.next=3,fetch("https://infinite-woodland-48479.herokuapp.com/items/current/"+g+"/"+y,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}});case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,p(c),T(0),n&&E(!1);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){_(),U(),e.setLoading(!1)}),[]),Object(c.useEffect)((function(){H()}),[y]),Object(u.jsxs)("div",{children:[Object(u.jsx)(Y,{userInfo:e.userInfo,token:e.token,getCurrentDateItems:H,setActiveYear:v,setActiveMonth:N,setLoading:e.setLoading,loading:e.loading,setFolderAdded:M}),Object(u.jsx)("div",{children:Object(u.jsx)(V,{yearsToDisplay:a,getCurrentYearMonths:U,getActiveYear:function(e){v(e.target.id),N()},activeYear:g})}),Object(u.jsx)("div",{children:Object(u.jsx)(J,{monthsToDisplay:l,getActiveMonth:function(e){N(e.target.id)},activeMonth:y})}),Object(u.jsxs)("h1",{className:"text-center",children:[y," "]}),Object(u.jsx)(q,{token:e.token,setItems:p,activeYear:g,activeMonth:y,getCurrentDateItems:H,setPriceTotal:T,setLoading:E,loading:B,setFolderAdded:M,folderAdded:z}),B?Object(u.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(u.jsx)(S.a,{})}):Object(u.jsx)(W,{items:O,token:e.token,priceTotal:I,setPriceTotal:T,getCurrentDateItems:H})]})},Q=function(e){var t=function(){e.setFirstVisit(!e.fisrtVisit)};return Object(u.jsxs)(T.a,{isOpen:e.firstVisit,children:[Object(u.jsx)(D.a,{toggle:t,children:"Create Folder"}),Object(u.jsx)(F.a,{children:Object(u.jsx)("p",{children:"Hello and Welcome"})}),Object(u.jsx)(B.a,{children:Object(u.jsx)(C.a,{onClick:function(){t()},className:"bg-primary",children:"Okay!"})})]})},R=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(),o=Object(s.a)(i,2),l=o[0],f=o[1];return Object(c.useEffect)((function(){Object(d.a)(j.a.mark((function t(){var n,c,a,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!localStorage.getItem("token")){t.next=17;break}if(n=localStorage.getItem("token"),!(c=b.a.decode(n))){t.next=17;break}if(!(new Date(1e3*c.exp)<new Date(Date.now()))){t.next=9;break}localStorage.clear(),t.next=17;break;case 9:return e.setToken(n),t.next=12,fetch("https://infinite-woodland-48479.herokuapp.com/user/"+c._id,{headers:{Authorization:"Bearer "+n}});case 12:return a=t.sent,t.next=15,a.json();case 15:r=t.sent,e.setUserInfo(r);case 17:case"end":return t.stop()}}),t)})))()}),[]),Object(c.useEffect)((function(){e.userInfo&&e.userInfo.firstVisit&&(alert("Hi!"),f(!0))}),[e.userInfo]),Object(u.jsxs)("div",{children:[Object(u.jsx)(h,{userInfo:e.userInfo}),e.userInfo?Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("div",{className:"img"}),Object(u.jsx)(K,{userInfo:e.userInfo,token:e.token,loading:a,setLoading:r})]}):Object(u.jsxs)("div",{className:" d-flex justify-content-center content align-items-center",children:[Object(u.jsx)("div",{className:"img"}),a?Object(u.jsx)(S.a,{type:"grow",color:"dark"}):Object(u.jsxs)("div",{className:"google-container",children:[Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:"Please log in to continue"})}),Object(u.jsxs)("div",{className:"google-btn",children:[Object(u.jsx)("div",{className:"google-icon-wrapper",children:Object(u.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"",className:"google-icon"})}),Object(u.jsx)("a",{href:"https://infinite-woodland-48479.herokuapp.com/google/login",className:"btn-text",onClick:function(){return r(!0)},children:Object(u.jsx)("b",{children:"Sign in with google"})})]})]})]}),l?Object(u.jsx)(Q,{firstVisit:l,setFirstVisit:f}):null]})},X=function(e){return Object(c.useEffect)((function(){var t=window.location.href,n=t.split("?")[1].split("=")[1];e.setToken(n),window.history.pushState({},"",t.split("?")[0]),localStorage.setItem("token",n)}),[]),Object(u.jsx)("div",{children:e.token?Object(u.jsx)(o.a,{to:"/"}):null})};var Z=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),l=Object(s.a)(r,2),j=l[0],d=l[1];return Object(u.jsx)(i.a,{children:Object(u.jsxs)(o.d,{children:[Object(u.jsx)(o.b,{exact:!0,path:"/",children:Object(u.jsx)(R,{token:n,setToken:a,setUserInfo:d,userInfo:j})}),Object(u.jsx)(o.b,{path:"/logged",children:Object(u.jsx)(X,{token:n,setToken:a})})]})})};n(308),n(309);r.a.render(Object(u.jsx)(Z,{}),document.getElementById("root"))}},[[310,1,2]]]);
//# sourceMappingURL=main.4535cb7b.chunk.js.map